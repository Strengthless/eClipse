<!DOCTYPE html>
<html lang="en">
<head>
  <title>DivanaSMP v2</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="./assets/images/favicon.png">

  <meta property="og:title" content="DivanaSMP v2" />
  <meta property="og:url" content="https://strengthless.club/smp" />
  <meta property="og:description" content="Sign up for the DivanaSMP v2 event here!" />
  <meta property="og:image" content="./assets/images/favicon.png" />
  <meta property="og:image:width" content="300" />
  <meta property="og:image:height" content="300" />

  <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <div id="background">
    </div>
    <div class="main">
      <div class="brand">
        <span>DivanaSMP v2</span>
      </div>
      <div class="content">
        <label class="desc">IGN:</label>
        <span><textarea placeholder="Strengthless" id="ign" spellcheck="false" maxlength="16" rows="1"></textarea></span>
        <br>
        <label class="desc">Discord:</label>
        <span><textarea placeholder="Strengthless#8282" id="dcn" spellcheck="false" rows="1"></textarea></span>
        <button onclick="send()">Submit</button>
      </div>
    </div>
    <div class="footer">
      <div class="discord" style="flex-shrink:1;flex-grow:1;flex-basis:auto">
        <a target="_blank" rel="noopener noreferrer" href="https://discord.gg/eZQ4na">
          <svg viewBox="0 0 136 36" style="flex-grow:0;flex-shrink:0">
            <ellipse cx="19.6" cy="17.1" rx="1.9" ry="2"></ellipse><ellipse cx="12.8" cy="17.1" rx="1.9" ry="2"></ellipse>
            <g>
              <path d="M28.5,0H3.8A3.778,3.778,0,0,0,0,3.7V28a3.714,3.714,0,0,0,3.8,3.7h21l-1-3.3,2.4,2.1,2.2,2,4,3.4V3.7A3.937,3.937,0,0,0,28.5,0ZM21.4,23.5s-.7-.8-1.2-1.5a5.958,5.958,0,0,0,3.3-2.1A22.059,22.059,0,0,1,21.4,21a13.817,13.817,0,0,1-2.7.8,15.394,15.394,0,0,1-4.8,0,12.544,12.544,0,0,1-2.7-.8c-.4-.2-.9-.4-1.4-.6-.1,0-.1-.1-.2-.1H9.5A5.2,5.2,0,0,0,9,20a5.932,5.932,0,0,0,3.2,2.1c-.6.7-1.2,1.5-1.2,1.5-4.1-.1-5.6-2.7-5.6-2.7A23.4,23.4,0,0,1,8.1,10.4a8.948,8.948,0,0,1,5.2-1.9l.2.2A10.672,10.672,0,0,0,8.7,11s.4-.2,1.1-.5A13.33,13.33,0,0,1,14,9.4h.3a15.243,15.243,0,0,1,3.7,0,16.225,16.225,0,0,1,5.6,1.7A12.081,12.081,0,0,0,19,8.8l.3-.3a8.948,8.948,0,0,1,5.2,1.9,23.4,23.4,0,0,1,2.7,10.5A7.865,7.865,0,0,1,21.4,23.5Z"></path>
            </g>
            <g transform="translate(34)">
              <path d="M12.8,7.8H6.7v6.8l4.1,3.6V11.6H13c1.4,0,2.1.7,2.1,1.7v5c0,1-.6,1.8-2.1,1.8H6.7v3.8h6.1c3.3,0,6.4-1.6,6.4-5.3V13.2C19.2,9.4,16.1,7.8,12.8,7.8ZM45,18.6V13c0-2,3.7-2.5,4.8-.5l3.4-1.3a6.069,6.069,0,0,0-5.8-3.7c-3.3,0-6.5,1.9-6.5,5.5v5.6c0,3.7,3.2,5.5,6.5,5.5a6.611,6.611,0,0,0,5.9-3.6l-3.7-1.6C48.7,21.1,45,20.6,45,18.6ZM33.8,13.8c-1.3-.3-2.1-.7-2.2-1.5.1-1.9,3-1.9,4.7-.1l2.7-2a6.884,6.884,0,0,0-5.6-2.6c-3,0-5.9,1.7-5.9,4.8s2.4,4.7,5.1,5.1c1.3.2,2.8.7,2.8,1.6-.1,1.7-3.7,1.6-5.4-.3l-2.6,2.4A7.258,7.258,0,0,0,33,24.1c3,0,6.3-1.7,6.5-4.8C39.6,15.3,36.7,14.3,33.8,13.8ZM21.4,23.9h4.2V7.8H21.5V23.9ZM91.2,7.8H85.1v6.8l4.1,3.6V11.6h2.2c1.4,0,2.1.7,2.1,1.7v5c0,1-.6,1.8-2.1,1.8H85.1v3.8h6.1c3.3,0,6.4-1.6,6.4-5.3V13.2C97.6,9.4,94.5,7.8,91.2,7.8ZM61.1,7.6c-3.4,0-6.8,1.8-6.8,5.5v5.5c0,3.7,3.4,5.5,6.8,5.5s6.8-1.8,6.8-5.5V13.1C67.9,9.4,64.5,7.6,61.1,7.6Zm2.7,11c0,1.2-1.3,1.8-2.6,1.8s-2.7-.6-2.7-1.8V13.1c0-1.2,1.3-1.8,2.6-1.8s2.7.6,2.7,1.8Zm19-5.5c-.1-3.8-2.7-5.3-6.1-5.3H70.1V23.9h4.2V18.8H75l3.8,5.1H84l-4.5-5.5C81.6,17.8,82.8,16.1,82.8,13.1Zm-6,2.2H74.4V11.6h2.4A1.853,1.853,0,1,1,76.8,15.3Z"></path>
            </g>
          </svg>
        </a>
      </div>
    </div>

    <script src="./assets/js/jquery.min.js"></script>

    <script>
        $("textarea").keydown(function(e){
            if (e.keyCode == 13)
        {
        e.preventDefault();
        }
        });
        // Prevents people from making a new line in the textareas.

        function send() {
            const url = "https://discordapp.com/api/webhooks/543807532477448222/mpiH8b1p0SweXXYD21WkYRQvlRRTuoEyILwFd9rI0DDlWih0yUVlXH8bJcEf88LifDkJ"
            const ign = $("#ign");
            const dcn = $("#dcn");
            // Variables for cleaner code.

            if(!ign.val().trim()) return;
            if(!dcn.val().trim()) return;
            if(!/^[A-Za-z0-9_]{1,16}$/.test(ign.val().trim())) return;
            if(!/^[\w\W]*#\d{4}$/.test(dcn.val().trim())) return;
            // Data validation for the submission (Blanks/ Invalid usernames).

            const getEmbed = (name) => {
                return {
                    author: {
                        name: "New sign-up!",
                        icon_url: "https://i.imgur.com/jgg8js5.png",
                    },
                    color: 11854048,
                    description: `**IGN:** ${ign.val().toString().trim()}\n**Discord name:** ${dcn.val().toString().trim()}\n\u200B`,
                    timestamp: new Date(),
                    footer: {
                        text: "DivanaSMP v2",
                        icon_url: "https://cdn.discordapp.com/icons/543183375121514497/6a0d293629679457b295362930d94bd9.png"
                    }
                }
            };
            // Configuration for the discord embed message.

            $.post(url, JSON.stringify({ embeds: [getEmbed()] }));
            // Sends the discord embed message.

            $.ajax({
              url: "./assets/php/signup.php",
              type: "POST",
              data: { ign: `${ign.val().toString().trim()}` , dcn: `${dcn.val().toString().trim()}`}
            });
            // Sends all the info into database.

            $("button").text("Sent!");
            $("button").attr("disabled", "disabled");
            $("button").addClass("disabled");
            // Disable the button as the names have been submitted.
            $("#ign").prop('disabled', true);
            $("#dcn").prop('disabled', true);
            // Make the textareas read-only as the names have been submitted.
        };
    </script>
</body>
</html>
